{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "AntiFraud message-analysis logic update: add critical maximum-risk dictionary affecting only message text scoring, with cumulative keyword scoring; enforce override rule for public/official phone numbers to always remain LOW (0%) and display entity name/country; no persistence and no changes to backend/auth/layout/pages; strict removal/avoidance of name “Caffeine”.",
  "architectural_notes": [
    "Apply incremental patch only: update message-analysis logic without rebuilding app, recreating pages, or modifying layout/seals/modules.",
    "Risk dictionary affects only message text scoring; must not alter scoring behavior for phone/crypto/email/public entity lookups.",
    "Public/official phone identification overrides all other scoring: always LOW (0%) and display entity name + country.",
    "No persistence of analyzed messages or personal data; scoring is in-memory only.",
    "No backend structure/authentication changes; logic patch only."
  ],
  "known_issues": [
    "Prior build attempt failed to process request; user now requires incremental logic-only patch with no rebuild."
  ],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-extend-the-existing-message-text-analysis-logic-to-include-an-internal-risk-dictionary-object-with-severity-critical-and-risk-level-maximum-containing-the-provided-keyword-phrase-groups-and-apply-it-only-when-analyzing-message-text-not-phone-email-crypto-or-public-entity-lookups",
      "title": "Extend the existing message-text analysis logic to include an internal `risk_dictionary` object with `severity=\"critical\"` and `risk_level=\"maximum\"`, containing the provided keyword/phrase groups, and apply it ONLY when analyzing message text (not phone, email, crypto, or public-entity lookups).",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-cumulative-scoring-for-the-risk-dictionary-in-message-text-analysis-each-matched-keyword-phrase-occurrence-increases-the-message-risk-score-and-multiple-matches-increase-the-score-cumulatively-cap-clamp-the-final-message-risk-score-to-the-existing-scoring-range-e-g-0-100-without-changing-non-message-scoring-behaviors",
      "title": "Implement cumulative scoring for the `risk_dictionary` in message-text analysis: each matched keyword/phrase occurrence increases the message risk score, and multiple matches increase the score cumulatively; cap/clamp the final message risk score to the existing scoring range (e.g., 0–100) without changing non-message scoring behaviors.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-enforce-the-public-phone-rule-override-in-the-phone-search-flow-when-a-searched-phone-number-is-identified-as-a-public-official-entity-always-display-entity-name-and-country-and-always-force-risk-level-to-low-with-risk-score-shown-as-0-regardless-of-any-other-heuristics-dictionary-scoring-this-override-must-not-affect-non-public-phone-results-and-must-not-affect-message-analysis",
      "title": "Enforce the Public Phone Rule override in the phone search flow: when a searched phone number is identified as a public/official entity, always display entity name and country, and always force risk level to LOW with risk score shown as 0%, regardless of any other heuristics/dictionary scoring; this override must not affect non-public phone results, and must not affect message analysis.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Add risk_dictionary (severity=\"critical\", risk_level=\"maximum\") to AntiFraud message text analysis with cumulative keyword-based risk score increases (message logic only)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Implement override rule for public/official phone numbers: always show entity name+country and force risk level LOW (0%), never escalate regardless of dictionary logic",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Ensure AntiFraud analysis logic changes are in-memory only (no persistence) and do not modify backend structure or authentication; patch message-analysis module only",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Enforce strict rule: do not include the name “Caffeine” anywhere in application, footer, metadata, interface, or visible code (including after incremental patch)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Apply the update as a small incremental logic-only patch: do not recreate pages, do not change existing layout/UI structure, do not modify seals/research modules/crypto search/email analysis/phone search flows beyond the specific public-phone LOW override above; do not add persistence; do not change backend storage/schema/auth; and ensure the string \"Caffeine\" is not introduced anywhere in user-facing text, metadata, or visible code as part of this patch.",
      "reqIds": [
        "REQ-4"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Incremental AntiFraud message dictionary scoring + public phone LOW override (logic-only patch)",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}